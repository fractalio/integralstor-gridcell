{% extends 'logged_in_base.html' %}
<style type="text/css">
    ul.errorlist {
        margin: 0;
        padding: 0;
    }
    .errorlist li {
        background-color: white;
        color: red;
        display: block;
        font-size: 10px;
        margin: 0 0 3px;
        padding: 4px 5px;
    }
</style>


{%block contents%}
<b>Volume creatation -> Create a 
{% if vol_type == "distributed_striped" %} distributed striped 
{% elif vol_type == "distributed_replicated"%} distributed replicated 
{% elif vol_type == "striped_replicated"%} striped replicated 
{% elif vol_type == "distributed_striped_replicated"%} distributed striped replicated 
{% else %} {{vol_type}}
{% endif %}

volume
</b> <br><br>

{% if app_debug %}
Executed the following command : "{{cmd}}". <br><br>
{% endif %}

{% if cmd_errors  %}

{% for err in cmd_errors%}
{{err}}<br>
{%endfor%}
</p>

{%elif cmd_output %}


{% for o in cmd_output%}
{{o}}<br>
{%endfor%}

{% else %}


<p style="color:red;"> {{error}}</p>


<form action="/create_volume/" method="post">
  <input type=hidden name="vol_type" value="{{vol_type}}">
  <input type=hidden name="num_bricks" value="{{num_bricks}}">
  <input type=hidden name="vol_type" value="{{vol_type}}">
        <div class="field">
            <table>
            <tr>
              <td>
            <label for="id_volume_name">Volume name:</label>
              </td>
              <td>
            {{ form.volume_name }}
              </td>
              <td>
            {{ form.volume_name.errors }}
              </td>
            </tr>
{% for di in form.brick_fields%}
            <tr>
{% for z in di %}
              <td>
              {% if forloop.counter0 == 0 %}
            <label for="id_{{z.name}}">Host:</label>
            {%else%}
            <label for="id_{{z.name}}">Directory:</label>
            {%endif%}
              </td>
              <td>
                {{z}}
              </td>
              <td>
                {{z.errors}}
              </td>
{%endfor%}
            </tr>
{% endfor %}
            <tr>
              <td>
            <label for="id_transport">Transport:</label>
              </td>
              <td>
            {{ form.transport }}
              </td>
              <td>
            {{ form.transport.errors }}
              </td>
            </tr>
{% if vol_type  == "distributed_striped"  or vol_type == "striped" or vol_type == "distributed_striped_replicated" or vol_type == "striped_replicated"%} 
            <tr>
              <td>
            <label for="id_stripe_count">Stripe count:</label>
              </td>
              <td>
            {{ form.stripe_count }}
              </td>
              <td>
            {{ form.stripe_count.errors }}
              </td>
            </tr>
{% endif%}
{% if vol_type  == "distributed_replicated"  or vol_type == "replicated" or vol_type == "distributed_striped_replicated" or vol_type == "striped_replicated"%} 
            <tr>
              <td>
            <label for="id_replica_count">Replica count:</label>
              </td>
              <td>
            {{ form.replica_count }}
              </td>
              <td>
            {{ form.replica_count.errors }}
              </td>
            </tr>
{% endif%}
            <tr>
              <td colspan=3 style="text-align:center">
        <input type="submit" value="Create">
              </td>
            </tr>
            </table>
        </div>
</form>

{% endif %}
{%endblock%}
{%block help_header%}
Create volume form
{%endblock%}
{%block help_body%}
<p>Help about creating volumesâ€¦</p>
{%endblock%}
