{% extends 'logged_in_base.html' %}

{%block page-header%}
  Snapshots
  <small>
      Snapshots
      <i class="fa fa-angle-double-right smaller-80"></i>
      View Snapshots
  </small>
{%endblock%}

{% if conf %}
<i>{{conf}}</i>
{%endif%}

{% if not snapshots %}
No snapshots appear to have been created. Click <a href="/create_snapshot/"> here</a> to create a new snapshot.
{%else %}
<div style="width:95%;position: relative; margin: 5px 0px; padding: 9px 9px 4px; background-color: rgb(255, 255, 255); border: 1px solid rgb(221, 221, 221); border-radius: 4px 4px 4px 4px;">
<table class="table table-striped">
<thead>
<tr>
<th>
Snapshot name
</th>
<th>
Snapshot date
</th>
<th>
Status
</th>
<th>
Change Status
</th>
<th>
Delete
</th>
<th>
Restore
</th>
</thead>
{%for d in snapshots %}
<tr>
  <td>
    {{d.name}}
  </td>
  <td>
    {{d.create_time}}
  </td>
  <td>
    {% if d.status == "Started" %}
      Activated
    {%else%}
      Deactivated
    {%endif%}

  </td>
  <td>
    {% if d.status == "Started" %}
    <form  role="form" action="/deactivate_snapshot/" method="post">
    <input type="hidden" name="snapshot_name" value="{{d.name}}">
    <input class="btn btn-primary" type="submit" value="Deactivate >>">
    {%else%}
    <form  role="form" action="/activate_snapshot/" method="post">
    <input type="hidden" name="snapshot_name" value="{{d.name}}">
    <input class="btn btn-primary" type="submit" value="Activate >>">
    {%endif%}
    </form>
  </td>
  <td>
    <form  role="form" action="/delete_snapshot/" method="post">
    <input type="hidden" name="snapshot_name" value="{{d.name}}">
    <input class="btn btn-primary" type="submit" value="Delete >>">
    </form>
  </td>
  <td>
    <form  role="form" action="/restore_snapshot/" method="post">
    <input type="hidden" name="snapshot_name" value="{{d.name}}">
    <input type="hidden" name="vol_name" value="{{vol_name}}">
    {% if vol_started %}
    <input class="btn btn-primary" type="submit" value="Restore >>">
    {%else%}
    <input class="btn btn-disabled" disabled type="submit" value="Restore >>">
    {%endif%}
    </form>
  </td>
</tr>
{%endfor%}
</table>
</div>
<p id="warning-text"> Snapshots can only be restored if the volume is stopped. </p>
{%endif%}

{%endblock%}
{%block help_header%}
Snapshots list help
{%endblock%}
{%block help_body%}
  <p>Help about snapshots listâ€¦</p>
{%endblock%}
