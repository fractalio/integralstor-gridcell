{% extends base_template %}

{%block status_selected%}
  style="background-color:white;color:white;"
{%endblock%}

{%block tab_header%}
  Snapshots information
{%endblock%}

{%block inside_content %}

<br><br>
{% if conf %}
<i>{{conf}}</i>
{%endif%}

{% if not snapshots %}
No snapshots appear to have been created. Click <a href="/create_snapshot/"> here</a> to create a new snapshot.
{%else %}
<div style="width:95%;position: relative; margin: 5px 0px; padding: 9px 9px 4px; background-color: rgb(255, 255, 255); border: 1px solid rgb(221, 221, 221); border-radius: 4px 4px 4px 4px;">
<table class="table table-striped">
<thead>
<tr>
<th>
Snapshot name
</th>
<th>
Snapshot date
</th>
<th>
Status
</th>
<th>
Change Status
</th>
<th>
Delete
</th>
<th>
Restore
</th>
</thead>
{%for d in snapshots %}
<tr>
  <td>
    {{d.name}}
  </td>
  <td>
    {{d.create_time}}
  </td>
  <td>
    {% if d.status == "Started" %}
      Activated
    {%else%}
      Deactivated
    {%endif%}

  </td>
  <td>
    {% if d.status == "Started" %}
    <form  role="form" action="/deactivate_snapshot/" method="post">
    <input type="hidden" name="snapshot_name" value="{{d.name}}">
    <input class="btn btn-danger cover-page" type="submit" value="Deactivate">
    {%else%}
    <form  role="form" action="/activate_snapshot/" method="post">
    <input type="hidden" name="snapshot_name" value="{{d.name}}">
    <input class="btn btn-primary cover-page" type="submit" value="Activate">
    {%endif%}
    </form>
  </td>
  <td>
    <form  role="form" action="/delete_snapshot/" method="post">
    <input type="hidden" name="snapshot_name" value="{{d.name}}">
    <input class="btn btn-danger cover-page" type="submit" value="Delete">
    </form>
  </td>
  <td>
    <form  role="form" action="/restore_snapshot/" method="post">
    <input type="hidden" name="snapshot_name" value="{{d.name}}">
    <input type="hidden" name="vol_name" value="{{vol_name}}">
    {% if vol_started %}
    <input class="btn btn-success cover-page" disabled type="submit" value="Restore">
    {%else%}
    <input class="btn btn-primary cover-page" type="submit" value="Restore >>">
    {%endif%}
    </form>
  </td>
</tr>
{%endfor%}
</table>
</div>
<p id="warning-text"> Snapshots can only be restored if the volume is stopped. </p>
{%endif%}

{%endblock%}
{%block help_header%}
View snapshots 
{%endblock%}
{%block help_body%}
  <p>This page displays all snapshots that have been taken for a particular volume. For each snapshot, this page also gives you options to activate, deactivate, delete or restore the particular snapshot.</p>
{%endblock%}

{% block tab_active %}
  <script>
    make_tab_active('snapshot_view_tab')
  </script>
{% endblock %}

