{% extends 'logged_in_base.html' %}



{%block contents%}
<script type="text/javascript">
var ip_counter=1
function select(showid, hideid) {
  document.getElementById(hideid).style.display = 'none';
  document.getElementById(showid).style.display = 'block';
}
</script>

<style type="text/css">
    ul.errorlist {
        margin: 0;
        padding: 0;
    }
    .errorlist li {
        background-color: white;
        color: red;
        display: block;
        font-size: 10px;
        margin: 0 0 3px;
        padding: 4px 5px;
    }
</style>
<span id="topic-text"> Manage -> Background operations -> Replace a sled </span>
<br>

{% if not supress_error_messages %}
{% if form.src_sled.errors %}
<span id="error-text"> Please select a sled to replace</span>
{%endif%}
{% if form.dest_sled.errors %}
<span id="error-text"> Please select a replacement sled</span>
{%endif%}
{%endif%}

<form action="/replace_sled/" method="post">



<span id="p-instruction-text"> Please select a sled to replace</span>


<div id="src_sled" style="display:block;margin-top:5px;margin-left:auto;border:solid 0px;text-align:center;"> 
    <table border=0 style="margin:auto;border-spacing:0;border-collapse:collapse;">
    <tr style="padding:0">
      <td style="padding:0">
      <img src="/static/images/chassis_left.png" style="padding:0">
      </td>
      {%for al in display_node_list %}
      <td style="padding:0">
        <table style="height:268px;border-spacing:0;border-collapse:collapse;"  border=0 >
        {% for bl in al %}
        <tr style="padding:0;">
          <td style="padding:0;width:255px;background:url('/static/images/sled.png') no-repeat;">
            <table  style="height:100%;width:100%;border-spacing:0;border-collapse:collapse;border: solid 0px;border-color:white">
            <tr>
              <td  colspan=2 style="border-right:solid 1px;text-align:center">
                &nbsp;
              </td>
<!--
              <td  rowspan=2 style="width:10%;border-bottom:solid 0px;border-right:solid 1px;border-left:solid 1px;text-align:center;background:lightgray">
                {% if bl.0.sled in sled_list %}
                <input type="radio"  value="{{ bl.0.sled }}" name="sled">
                {%else%}
                &nbsp;
                {%endif%}
              </td>
-->
            </tr>
            <tr>
              <td colspan=2 style="border-right:solid 1px;text-align:center;background:lightgray">
                <p id="p-node-text">Sled {{bl.0.sled}}
          {% if bl.0.sled in src_sled_list %}
          <input type="radio"  value="{{ bl.0.sled }}" name="src_sled">
          {%else%}
          &nbsp;
          {%endif%}
              </td>
<!--
              {% for node in bl %}
              <td style="background:lightgray;border-bottom:solid 1px;border-right:solid 1px" >
                <div style="width:100%; text-align:center;" onClick="load_node_info('{{node.hostname}}', 'Sled {{node.sled}} Node {{forloop.counter}}');return false;">Node {{forloop.counter}}</div>
              </td>
              {%endfor %}
-->
            </tr>
            </table>
          </td>
        </tr>
        {%endfor%}
        </table>
      </td>
      {%endfor%}
      <td style="padding:0">
      <img src="/static/images/chassis_right.png" style="padding:0">
      </td>
    </tr>
    </table>
        <button class="btn" onClick="select('dest_sled', 'src_sled'); return false;">Next >> </button>
</div>













<!--
<table border=0>
  <tr>
    {%for node in system_config_list%}
    {% if forloop.counter0|divisibleby:2 %}
    <td >
    <table width=100% class="table table-bordered">
      <tr>
        <td>
          {% if node.sled in src_sled_list %}
          <input type="radio"  value="{{ node.sled }}" name="src_sled">
          {%else%}
          &nbsp;
          {%endif%}
        </td>
      </tr>
      <tr>
        <th>
          Sled {{node.sled}}
        </th>
      </tr>      
    {%endif%}
      <tr >
        <td>
          <table width=100% class="table table-bordered">
          <tr>
            <th>
            D{%if forloop.counter0|divisibleby:2%}1{%else%}2{%endif%}
            </th>
          </tr>
          <tr>
            <td {% if not node.in_cluster or not node.active%} style="background:red" {%else%} style="background:lightgreen"{% endif%}>
            </td>
          </tr>
          </table>
        </td>
      </tr>
    {%if not forloop.counter0|divisibleby:2 %}
    </table>
    </td>
    {%endif%}
    {%endfor%}
  </tr>
  <tr>
    <td>
        <button class="btn" onClick="select('dest_sled', 'src_sled'); return false;">Next >> </button>
    </td>
  </tr>
</table>
</div>

-->

<div id = "dest_sled" style="display:None;margin-top:5px;margin-left:auto;border:solid 0px;text-align:center;"> 
    <table border=0 style="margin:auto;border-spacing:0;border-collapse:collapse;">
    <tr style="padding:0">
      <td style="padding:0">
      <img src="/static/images/chassis_left.png" style="padding:0">
      </td>
      {%for al in display_node_list %}
      <td style="padding:0">
        <table style="height:268px;border-spacing:0;border-collapse:collapse;"  border=0 >
        {% for bl in al %}
        <tr style="padding:0;">
          <td style="padding:0;width:255px;background:url('/static/images/sled.png') no-repeat;">
            <table  style="height:100%;width:100%;border-spacing:0;border-collapse:collapse;border: solid 0px;border-color:white">
            <tr>
              <td  colspan=2 style="border-right:solid 1px;text-align:center">
                &nbsp;
              </td>
<!--
              <td  rowspan=2 style="width:10%;border-bottom:solid 0px;border-right:solid 1px;border-left:solid 1px;text-align:center;background:lightgray">
                {% if bl.0.sled in sled_list %}
                <input type="radio"  value="{{ bl.0.sled }}" name="sled">
                {%else%}
                &nbsp;
                {%endif%}
              </td>
-->
            </tr>
            <tr>
              <td colspan=2 style="border-right:solid 1px;text-align:center;background:lightgray">
                <p id="p-node-text">Sled {{bl.0.sled}}
          {% if bl.0.sled in dest_sled_list %}
          <input type="radio"  value="{{ bl.0.sled }}" name="dest_sled">
          {%else%}
          &nbsp;
          {%endif%}
              </td>
<!--
              {% for node in bl %}
              <td style="background:lightgray;border-bottom:solid 1px;border-right:solid 1px" >
                <div style="width:100%; text-align:center;" onClick="load_node_info('{{node.hostname}}', 'Sled {{node.sled}} Node {{forloop.counter}}');return false;">Node {{forloop.counter}}</div>
              </td>
              {%endfor %}
-->
            </tr>
            </table>
          </td>
        </tr>
        {%endfor%}
        </table>
      </td>
      {%endfor%}
      <td style="padding:0">
      <img src="/static/images/chassis_right.png" style="padding:0">
      </td>
    </tr>
    </table>
        <button class="btn" onClick="select('src_sled', 'dest_sled'); return false;"><< Back  </button>
        <input class="btn" type="submit" value="Replace">
</div>













<!--
<div id="dest_sled" style="display: none">
<span id="p-instruction-text"> Please select a replacement sled</span>
<table border=0>
  <tr>
    {%for node in system_config_list%}
    {% if forloop.counter0|divisibleby:2 %}
    <td >
    <table width=100% class="table table-bordered">
      <tr>
        <td>
          {% if node.sled in dest_sled_list %}
          <input type="radio"  value="{{ node.sled }}" name="dest_sled">
          {%else%}
          &nbsp;
          {%endif%}
        </td>
      </tr>
      <tr>
        <th>
          Sled {{node.sled}}
        </th>
      </tr>      
    {%endif%}
      <tr >
        <td>
          <table width=100% class="table table-bordered">
          <tr>
            <th>
            D{%if forloop.counter0|divisibleby:2%}1{%else%}2{%endif%}
            </th>
          </tr>
          <tr>
            <td {% if not node.in_cluster or not node.active%} style="background:red" {%else%} style="background:lightgreen"{% endif%}>
            </td>
          </tr>
          </table>
        </td>
      </tr>
    {%if not forloop.counter0|divisibleby:2 %}
    </table>
    </td>
    {%endif%}
    {%endfor%}
  </tr>
  <tr>
    <td>
        <button class="btn" onClick="select('src_sled', 'dest_sled'); return false;"><< Back  </button>
        <input type="submit" value="Replace">
    </td>
  </tr>
</table>
</div>
-->
</form>
{%endblock%}
{%block help_header%}
Remove storagehelp
{%endblock%}
{%block help_body%}
<p>Help about removing storage- needs customisationâ€¦</p>
{%endblock%}
